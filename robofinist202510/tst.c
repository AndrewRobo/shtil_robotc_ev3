#pragma config(Sensor, S1,     port_nose,      sensorEV3_Ultrasonic)
#pragma config(Sensor, S2,     port_left,      sensorEV3_IRSensor)
#pragma config(Sensor, S3,     port_right,     sensorEV3_IRSensor)
#pragma config(Sensor, S4,     port_gyro,      sensorEV3_Gyro)
#pragma config(Motor,  motorA,          mot_left,      tmotorEV3_Large, openLoop, encoder)
#pragma config(Motor,  motorB,          port_radar,    tmotorEV3_Medium, openLoop, encoder)
#pragma config(Motor,  motorC,          port_rul,      tmotorEV3_Medium, openLoop, encoder)
#pragma config(Motor,  motorD,          mot_right,     tmotorEV3_Large, openLoop, encoder)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//


#define dlog 1;
//preprocessor dla datalog

string logtemplate = "n0v2_%d.csv";
string llog;

int idr, id, idtmp;



task main()
{
time1[0]=0;
ubyte ii=0;

do  // formiruem new filename
{
	stringFormat(llog,logtemplate,ii);
    ii++;
    idr =  fileOpenRead(llog);
    idtmp =idr;
    if ( idr>0 )
	    { fileClose(idr); }
}while (idtmp>0);

char data1 = ',';
//char comma = ',';
char LF = '\n';
char * pData = "test writing test programmi logov v file big new file";
float data2 = 314.2;
long data3 = 5000000;
short data4 = 3200;

string sst = "test programmi logov v file big new file";


id = fileOpenWrite(llog);


for (short kk=0; kk<1000; kk++)
{
	string ts;
	stringFormat(ts,"timestamp=%d,", time1[0] );
	fileWriteData(id, ts, 20);



fileWriteChar(id, data1);

fileWriteData(id, pData, 35);
fileWriteChar(id, data1);


fileWriteFloat(id, data2);
fileWriteChar(id, data1);


fileWriteLong(id, data3);
fileWriteChar(id, data1);

//fileWriteData(id, data3,1);


fileWriteChar(id, data1);


fileWriteShort(id, data4);
fileWriteChar(id, data1);

fileWriteChar(id, LF);

}

	//len_name = sizeof(sst);
	eraseDisplay();
	displayBigTextLine(1, "LL = %d ", ii);


fileClose(id);
sleep(5000);
////////////////   END
//dispEndTimer();
}
